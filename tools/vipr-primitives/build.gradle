apply plugin:'java'

ext {
    internalLibrary = true
}

dependencies {
    compile files("libs/javapoet-1.8.0.jar"),
            files("libs/reflections-0.9.10.jar"),
            library(guava),
            rootProject.toolsJar,
            project(":apidocs"),
            project(":primitives")
}

task generatePrimitives(type: Javadoc, dependsOn: [jar]) {
    title = 'ViPR'
    source = [
        project(":apisvc").sourceSets.main.java.srcDirs
    ]
    classpath = sourceSets.main.compileClasspath

    // Exclude impl directory that only contains internal tools
    include '**/*.java'

    options.doclet "com.emc.vipr.primitives.PrimitiveDoclet"
    options.docletpath sourceSets.main.runtimeClasspath as File[]
    options.addStringOption("subpackages", "com.emc.storageos")
    options.addStringOption("d", "${rootProject.projectDir}/internalLibraries/primitives/")
    options.quiet()
}

