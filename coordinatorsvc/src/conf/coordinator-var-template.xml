<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
    <bean id="config" class="com.emc.storageos.coordinator.service.impl.SpringQuorumPeerConfig"
          init-method="init">
        <!-- each node in cluster must have unique id starting from 1 -->
        <property name="machineId" value="${node_index}"/>
        <property name="properties">
            <props>
                <!-- see zk configuration guide -->
                <prop key="tickTime">2000</prop>
                <prop key="dataDir">/data/zk</prop>
                <prop key="standaloneEnabled">false</prop>
                <prop key="initLimit">5</prop>
                <prop key="syncLimit">2</prop>
                <!-- auto purge zookeeper snapshot and transaction logs -->
                <prop key="autopurge.snapRetainCount">16</prop>
                <!-- auto purge interval (minutes) -->
                <prop key="autopurge.purgeInterval">30</prop>
                <foreach iterator="iter">
                <prop key="server.${iter}">${network_${iter}_ipaddr_service},2888,2889:participant;2181</prop>
                </foreach>
                <foreach iterator="iter_site">
                <prop key="server.${iter_site}">${standby_${iter_site}_ipaddr_service},2888,2889;2181:observer;2181</prop>
                </foreach>
            </props>
        </property>
    </bean>

    <bean id="serviceinfo" class="com.emc.storageos.coordinator.common.impl.ServiceImpl">
        <property name="name" value="coordinatorsvc"/>
        <property name="id" value="coordinatorsvc-${node_index}"/>
        <property name="endpoint" value="http://${node_id}:9998/"/>
        <property name="version" value="1"/>
    </bean>

</beans>
