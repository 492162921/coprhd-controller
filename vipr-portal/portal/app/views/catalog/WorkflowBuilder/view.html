#{extends 'main.html' /}
#{set navSelected: ['nav.orders', 'nav.catalog', 'nav.workflowBuilder'] /}

#{script 'jquery.panzoom.js'/}
#{script 'jquery-ui.js'/}
#{script 'jsPlumb-2.1.7.js'/}
#{script 'workflowbuilder.js'/}
#{script 'jstree.min.js'/}

<div id="builderController" ng-controller="builderController" class="row">
    <div class="builder-column">
        <ul id="wftabs" class="nav nav-tabs" role="tablist">
            <li class="active"><a href="#home" role="tab" data-toggle="tab" data-id="home"><span class="glyphicon glyphicon-home "></span>&nbsp;Workflow Library</a></li>
            <li ng-repeat="workflowTab in workflowTabs" class=""><a href="{{workflowTab.href}}" role="tab" data-toggle="tab">{{workflowTab.id}}<button class="close" ng-click="closeTab(workflowTab.id)" type="button" title="Close tab"><span aria-hidden="true">&times;</span></button></a></li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane active" id="home">
                <div class="col-md-3">
                    <div id="theSidebar" class="sidebar" style="" >
                        <div class="tree_buttons" style="padding-bottom: 10px; padding-top: 10px;padding-right: 10px;float: right">
                            <button id="addFolder" type="button" class="btn btn-xs btn-primary add" value="Add Folder" title="Add Folder" onclick="addFolder();" disabled>
                                <span class="glyphicon glyphicon-folder-close "></span>
                            </button>
                            <button id="addWorkflow" type="button" class="btn btn-xs btn-success add" value="Add Workflow" title="Add Workflow" onclick="addWorkflow();" disabled>
                                <span class="glyphicon glyphicon-plus "></span>
                            </button>
                            <button id="deleteNode" type="button" class="btn btn-xs btn-danger delete" value="Delete" title="Delete" onclick="deleteNode();" disabled>
                                <span class="glyphicon glyphicon-trash "></span>
                            </button>
                            <button id="editNode" type="button" class="btn btn-xs btn-warning edit" value="Edit" title="Edit" onclick="editNode();" disabled>
                                <span class="glyphicon glyphicon-pencil "></span>
                            </button>
                            <!--TODO: Workflow preview is pending, so disabling this button for now-->
                            <button id="previewWorkflow"  type="button" class="btn btn-xs btn-default info" value="Preview" title="Preview" disabled>
                                <span class="glyphicon glyphicon-eye-open "></span>
                            </button>
                            <button id="openEditor"  type="button" class="btn btn-xs btn-default info" value="Open" title="Open" onclick="previewWorkflow()" disabled>
                                <span class="glyphicon glyphicon-new-window "></span>
                            </button>
                        </div>
                        <div>
                            <input class="search-input form-control" placeholder="search..."></input>
                        </div>
                        <div style="overflow: auto; height:90%; padding: 10px;">
                            <div id="jstree_demo" >
                            </div>
                        </div>
                    </div>
                </div>
                <!--TODO: workflow preview-->
                <div class="col-md-9">
                    <div style="height:80vh; border:1px solid #000; padding:20px;">Workflow preview TODO</div>
                    <div style="padding:10px;">
                        <p><strong>My Workflow description</strong><br>Updated on 10/10/10</p>
                    </div>
                </div>
            </div>
            <div ng-controller="tabController" ng-repeat="workflowTab in workflowTabs" class="tab-pane" id="{{workflowTab.id}}">
                #{workflowDesigner/}
            </div>
        </div>
    </div>
</div>