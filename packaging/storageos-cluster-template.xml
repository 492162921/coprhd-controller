<?xml version="1.0" encoding="UTF-8"?>
<Envelope vmw:buildId="build-455964" xmlns="http://schemas.dmtf.org/ovf/envelope/1" xmlns:cim="http://schemas.dmtf.org/wbem/wscim/1/common" xmlns:ovf="http://schemas.dmtf.org/ovf/envelope/1" xmlns:rasd="http://schemas.dmtf.org/wbem/wscim/1/cim-schema/2/CIM_ResourceAllocationSettingData" xmlns:vmw="http://www.vmware.com/schema/ovf" xmlns:vssd="http://schemas.dmtf.org/wbem/wscim/1/cim-schema/2/CIM_VirtualSystemSettingData" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <!-- Virtual Disk Files --> 
  <References>
    <File ovf:href="${disk1}" ovf:id="file1" ovf:size="${disk1_size}"/>
    <File ovf:href="${disk2}" ovf:id="file2" ovf:size="${disk2_size}"/>
    <File ovf:href="${disk3}" ovf:id="file3" ovf:size="${disk3_size}"/>
  </References>

  <!-- Virtual Disk Description -->
  <DiskSection>
    <Info>Virtual Disk Information</Info>
    <Disk ovf:capacity="${disk1_capacity}" ovf:capacityAllocationUnits="byte * 2^30" ovf:diskId="vmdisk1" ovf:fileRef="file1" ovf:format="http://www.vmware.com/interfaces/specifications/vmdk.html#streamOptimized" ovf:populatedSize="${disk1_populated_size}"/>
    <Disk ovf:capacity="${disk2_capacity}" ovf:capacityAllocationUnits="byte * 2^30" ovf:diskId="vmdisk2" ovf:fileRef="file2" ovf:format="http://www.vmware.com/interfaces/specifications/vmdk.html#streamOptimized" ovf:populatedSize="${disk2_populated_size}"/>
    <Disk ovf:capacity="${disk3_capacity}" ovf:capacityAllocationUnits="byte * 2^30" ovf:diskId="vmdisk3" ovf:fileRef="file3" ovf:format="http://www.vmware.com/interfaces/specifications/vmdk.html#streamOptimized" ovf:populatedSize="${disk3_populated_size}"/>
  </DiskSection>

  <!-- Logical Networks -->
  <NetworkSection>
    <Info>The list of logical networks</Info>
    <Network ovf:name="ViPR Network">
      <Description>ViPR Network</Description>
    </Network>
  </NetworkSection>

  <vmw:IpAssignmentSection ovf:required="false" vmw:protocols="IPv4" vmw:schemes="ovfenv">
    <Info>Supported IP assignment schemes</Info>
  </vmw:IpAssignmentSection>

  <!-- Cluster vApp -->
  <VirtualSystemCollection ovf:id="${product_name}-${product_version}.${product_release}-controller-${product_variant}">
    <Info>EMC ${product_brand} Controller ${product_variant}</Info>
    <Name>${product_name}-${product_version}.${product_release}-controller-${product_variant}</Name>

    <!-- EULA -->
    <EulaSection>
      <Info>End-user license agreement</Info>
      <License>${include="storageos-license.txt"}</License>
    </EulaSection>

    <!-- Startup order -->
    <StartupSection>
      <Info>Startup order</Info>
      <foreach iterator="iter">
      <Item ovf:id="vipr${iter}" ovf:order="1" ovf:startAction="powerOn" ovf:startDelay="5" ovf:stopAction="powerOff" ovf:stopDelay="120"/>
      </foreach>
    </StartupSection>
    <!-- Cluster Resources -->
<!--
    <ResourceAllocationSection>
      <Info>CPU and memory resource requirements</Info>
      <Item>
        <rasd:AllocationUnits>hertz * 10^6</rasd:AllocationUnits>
        <rasd:ElementName>CPU reservation</rasd:ElementName>
        <rasd:InstanceID>1</rasd:InstanceID>
        <rasd:Reservation>2000</rasd:Reservation>
        <rasd:ResourceType>3</rasd:ResourceType>
        <rasd:Weight>2000</rasd:Weight>
      </Item>
      <Item>
        <rasd:AllocationUnits>byte * 2^20</rasd:AllocationUnits>
        <rasd:ElementName>Memory reservation</rasd:ElementName>
        <rasd:InstanceID>2</rasd:InstanceID>
        <rasd:Reservation>4096</rasd:Reservation>
        <rasd:ResourceType>4</rasd:ResourceType>
        <rasd:Weight>4096</rasd:Weight>
      </Item>
    </ResourceAllocationSection>
-->
    <AnnotationSection ovf:required="false">
      <Info>A human-readable annotation</Info>
      <Annotation>EMC ${product_brand} ${product_version}.${product_release} controller ${product_variant}</Annotation>
    </AnnotationSection>

    <ProductSection>
      <Info>Information about the installed software</Info>
      <Product>${product_name}-${product_version}.${product_release}-controller-${product_variant}</Product>
      <Vendor>EMC Corp</Vendor>
      <Version>${product_version_uint16}</Version>
      <FullVersion>${product_version}.${product_release}</FullVersion>
      <ProductUrl>http://www.emc.com/vipr</ProductUrl>
      <VendorUrl>http://www.emc.com</VendorUrl>

      <!-- Properties -->
      <Category>EMC ${product_brand}</Category>
${include="storageos-cluster-properties.xml"}
    </ProductSection>
    <foreach iterator="iter">

    <!-- vipr${iter} -->
    <VirtualSystem ovf:id="vipr${iter}">
      <Info>EMC ${product_brand} controller virtual nachine</Info>
      <Name>vipr${iter}</Name>
      <OperatingSystemSection ovf:id="85" ovf:version="12" vmw:osType="otherLinux64Guest">
        <Info>Guest Operating System</Info>
        <Description>Other Linux (64-bit)</Description>
      </OperatingSystemSection>

      <!-- Virtual Hardware -->
      <VirtualHardwareSection ovf:transport="com.vmware.guestInfo iso">
        <Info>Virtual Hardware Requirements</Info>
        <System>
          <vssd:ElementName>Virtual Hardware Family</vssd:ElementName>
          <vssd:InstanceID>0</vssd:InstanceID>
          <vssd:VirtualSystemIdentifier>${product_name}</vssd:VirtualSystemIdentifier>
          <vssd:VirtualSystemType>vmx-09</vssd:VirtualSystemType>
        </System>
        <Item>
          <rasd:AllocationUnits>hertz * 10^6</rasd:AllocationUnits>
          <rasd:Description>Number of Virtual CPUs</rasd:Description>
          <rasd:ElementName>${vcpu_count} virtual CPU(s)</rasd:ElementName>
          <rasd:InstanceID>1</rasd:InstanceID>
          <rasd:ResourceType>3</rasd:ResourceType>
          <rasd:VirtualQuantity>${vcpu_count}</rasd:VirtualQuantity>
        </Item>
        <Item>
          <rasd:AllocationUnits>byte * 2^20</rasd:AllocationUnits>
          <rasd:Description>Memory Size</rasd:Description>
          <rasd:ElementName>${memory_mb}MB of memory</rasd:ElementName>
          <rasd:InstanceID>2</rasd:InstanceID>
          <rasd:ResourceType>4</rasd:ResourceType>
          <rasd:VirtualQuantity>${memory_mb}</rasd:VirtualQuantity>
        </Item>
        <Item>
          <rasd:Address>0</rasd:Address>
          <rasd:Description>SCSI Controller</rasd:Description>
          <rasd:ElementName>SCSI controller 0</rasd:ElementName>
          <rasd:InstanceID>3</rasd:InstanceID>
          <rasd:ResourceSubType>lsilogic</rasd:ResourceSubType>
          <rasd:ResourceType>6</rasd:ResourceType>
        </Item>
        <Item>
          <rasd:Address>1</rasd:Address>
          <rasd:Description>IDE Controller</rasd:Description>
          <rasd:ElementName>IDE 1</rasd:ElementName>
          <rasd:InstanceID>4</rasd:InstanceID>
          <rasd:ResourceType>5</rasd:ResourceType>
        </Item>
        <Item>
          <rasd:Address>0</rasd:Address>
          <rasd:Description>IDE Controller</rasd:Description>
          <rasd:ElementName>IDE 0</rasd:ElementName>
          <rasd:InstanceID>5</rasd:InstanceID>
          <rasd:ResourceType>5</rasd:ResourceType>
        </Item>
        <Item>
          <rasd:AddressOnParent>0</rasd:AddressOnParent>
          <rasd:ElementName>Harddisk 1</rasd:ElementName>
          <rasd:HostResource>ovf:/disk/vmdisk1</rasd:HostResource>
          <rasd:InstanceID>6</rasd:InstanceID>
          <rasd:Parent>3</rasd:Parent>
          <rasd:ResourceType>17</rasd:ResourceType>
        </Item>
        <Item>
          <rasd:AddressOnParent>1</rasd:AddressOnParent>
          <rasd:ElementName>Harddisk 2</rasd:ElementName>
          <rasd:HostResource>ovf:/disk/vmdisk2</rasd:HostResource>
          <rasd:InstanceID>7</rasd:InstanceID>
          <rasd:Parent>3</rasd:Parent>
          <rasd:ResourceType>17</rasd:ResourceType>
        </Item>
        <Item>
          <rasd:AddressOnParent>2</rasd:AddressOnParent>
          <rasd:ElementName>Harddisk 3</rasd:ElementName>
          <rasd:HostResource>ovf:/disk/vmdisk3</rasd:HostResource>
          <rasd:InstanceID>8</rasd:InstanceID>
          <rasd:Parent>3</rasd:Parent>
          <rasd:ResourceType>17</rasd:ResourceType>
        </Item>
        <Item>
          <rasd:AddressOnParent>7</rasd:AddressOnParent>
          <rasd:AutomaticAllocation>true</rasd:AutomaticAllocation>
          <rasd:Connection>ViPR Network</rasd:Connection>
          <rasd:Description>VmxNet3 ethernet adapter on &quot;ViPR Network&quot;</rasd:Description>
          <rasd:ElementName>Network adapter 1</rasd:ElementName>
          <rasd:InstanceID>9</rasd:InstanceID>
          <rasd:ResourceSubType>VmxNet3</rasd:ResourceSubType>
          <rasd:ResourceType>10</rasd:ResourceType>
        </Item>
        <Item ovf:required="false">
          <rasd:AddressOnParent>0</rasd:AddressOnParent>
          <rasd:AutomaticAllocation>false</rasd:AutomaticAllocation>
          <rasd:ElementName>CD/DVD drive 1</rasd:ElementName>
          <rasd:InstanceID>10</rasd:InstanceID>
          <rasd:Parent>5</rasd:Parent>
          <rasd:ResourceType>15</rasd:ResourceType>
        </Item>
        <vmw:Config ovf:required="false" vmw:key="tools.syncTimeWithHost" vmw:value="FALSE"/>
      </VirtualHardwareSection>

      <AnnotationSection ovf:required="false">
        <Info>A human-readable annotation</Info>
        <Annotation>EMC ${product_brand} ${product_version}.${product_release} Controller ${product_variant}</Annotation>
      </AnnotationSection>
        
      <ProductSection>
        <Info>Information about the installed software</Info>
        <Product>${product_name}-${product_version}.${product_release}</Product>
        <Vendor>EMC Corp</Vendor>
        <Version>${product_version_uint16}</Version>
        <FullVersion>${product_version}.${product_release}</FullVersion>
        <ProductUrl>http://www.emc.com/vipr</ProductUrl>
        <VendorUrl>http://www.emc.com</VendorUrl>
        <Property ovf:key="node_id" ovf:type="string" ovf:userConfigurable="false" ovf:value="vipr${iter}">
          <Label>Node ID</Label>
          <Description>ID of ViPR Node</Description>
        </Property>
      </ProductSection>

    </VirtualSystem>
    </foreach>

  </VirtualSystemCollection>
</Envelope>


